---
layout: post
title: MySQL 数据库相关知识整理
categories: Database
description: MySQL 数据库相关知识整理
keywords: database, mysql, 原理, 数据库
---

MySQL 数据库在互联网业务中的地位无需多言，本文从各个方面整理 MySQL 数据库的知识点。

## 底层原理

MySQL 底层是使用了哪些技术，使得其具备高性能的特性呢？

### 存储引擎

MySQL 的存储引擎主要包括：

- MyISAM
  - 低版本默认引擎
  - 支持全文检索、压缩、空间函数
  - 不支持事务和行级锁
  - 对全表加锁
- InnoDB
  - 高版本默认引擎
  - 默认的事务性引擎
  - 性能优越、自动崩溃回复特性
  - 采用 MVCC 实现高并发、实现不同隔离级别
  - 基于聚簇索引建立表
  - 采用可预测性预读的技术从磁盘加载数据
- Archive/Memory/CSV 等

### 磁盘存储结构

磁盘存储数据最小单位是扇区，一个扇区大小为 512 字节；文件系统最小单元是块，一个块的大小是 4K 字节。

比如说一个实际大小为 1 字节的文件，在文件系统中却占用了 4K(4096) 字节的空间。

InnoDB 存储引擎的最小存储单元是页，一个页的大小是 16K。可以查看后缀为 ibd 的数据文件，其大小始终为 16K(10384) 字节的整数倍。

### B-Tree

B-tree（B树）的每个节点可以拥有2个以上的子节点，是一颗多路平衡查找树，它广泛应用于数据库索引和文件系统中。

### B+Tree

每一个叶子节点都包含指向下一个叶子节点的指针，从而方便叶子节点的范围遍历

每个节点的指针上限为2d而不是2d+1

内节点不存储data，只存储key；叶子节点不存储指针。

每个叶子节点增加一个指向相邻叶子节点的指针，就形成了带有顺序访问指针的B+Tree。

## 数据库事务、隔离级别、存在问题
## 索引
## 查询优化
## explain 详解
## join 优化注意点
### 索引失败分析
## mvcc
## redo、undo
## 分库分表
## 弹性扩容
