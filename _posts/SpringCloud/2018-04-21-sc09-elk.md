---
layout: post
title: Spring Cloud 配置 ELK 分析日志
categories: SpringCloud
description: 微服务设计与实践原则
keywords: web, micro, design, service
---

整理流程如下：

vi /etc/security/limits.d/90-nproc.conf # 改为如下
*          soft    nproc     10240

vi /etc/sysctl.conf   # 或者 echo 'vm.max_map_count=655360' >> /etc/sysctl.conf
vm.max_map_count=655360  # 增加

vi /etc/security/limits.conf  # 增加以下内容
* soft nofile 65536
* hard nofile 131072
* soft nproc 2048
* hard nproc 4096

sysctl -p # 使得参数优化设置生效

centos x64

最低 jdk1.8

groupadd  elk
useradd elk -g elk
chown -R elk:elk /elk
su elk

https://artifacts.elastic.co/downloads/elasticsearch/elasticsearch-6.2.4.tar.gz
https://artifacts.elastic.co/downloads/logstash/logstash-6.2.4.tar.gz
https://artifacts.elastic.co/downloads/logstash/logstash-6.2.4.tar.gz

# Elasticsearch

cd elasticsearch-6.2.4
cp config/elasticsearch.yml config/elasticsearch.yml.bak
vi config/elasticsearch.yml

network.host=localhost
network.port=9200

bootstrap.memory_lock: false
bootstrap.system_call_filter: false

./bin/elasticsearch 启动即可

# 